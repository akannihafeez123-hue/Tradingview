{
  "openapi": "3.1.0",
  "info": {
    "title": "ComplianceCheck EU Textile API",
    "description": "Automated validation of E-commerce textile products against core EU DPP and REACH regulations (Passive Income Microservice).",
    "version": "1.0.0"
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Read Root",
        "description": "TEMPORARY: This endpoint returns the raw OpenAPI JSON schema for RapidAPI upload.\nThis is necessary because Wispbyte blocks standard documentation paths.",
        "operationId": "read_root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/v1/check_product": {
      "post": {
        "tags": [
          "Compliance"
        ],
        "summary": "Check Product",
        "description": "Submit product data to check compliance against core EU DPP and REACH rules.",
        "operationId": "check_product_v1_check_product_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductData"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ComplianceResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ComplianceResult": {
        "properties": {
          "product_sku": {
            "type": "string",
            "title": "Product Sku"
          },
          "is_compliant": {
            "type": "boolean",
            "title": "Is Compliant",
            "description": "True if no hard 'errors' are found."
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "List of critical compliance failures (FAIL)."
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "List of future or non-critical issues (PREPARE/WARN)."
          },
          "next_steps": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Steps",
            "description": "General advice for non-compliant checks."
          }
        },
        "type": "object",
        "required": [
          "product_sku",
          "is_compliant",
          "errors",
          "warnings"
        ],
        "title": "ComplianceResult",
        "description": "Output schema for the API's compliance check result."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ProductData": {
        "properties": {
          "product_sku": {
            "type": "string",
            "title": "Product Sku",
            "description": "Unique SKU or Identifier for the product."
          },
          "material_composition": {
            "type": "string",
            "title": "Material Composition",
            "description": "e.g., '60% Cotton, 40% Recycled Polyester'."
          },
          "weight_g": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Weight G",
            "description": "Product weight in grams."
          },
          "country_of_origin": {
            "type": "string",
            "maxLength": 2,
            "minLength": 2,
            "title": "Country Of Origin",
            "description": "2-letter ISO code (e.g., 'CN', 'IN')."
          },
          "has_biocidal_treatment": {
            "type": "boolean",
            "title": "Has Biocidal Treatment",
            "description": "Is the product treated with biocidal substances (e.g., for anti-odor)?",
            "default": false
          },
          "is_repairable": {
            "type": "boolean",
            "title": "Is Repairable",
            "description": "Is the item designed for easy repair (e.g., replaceable zippers)?",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "product_sku",
          "material_composition",
          "weight_g",
          "country_of_origin"
        ],
        "title": "ProductData",
        "description": "Input schema for the user's product data submission."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  },
  "servers": [
    {
      "url": "http://217.154.212.66:10935"
    }
  ]
}
